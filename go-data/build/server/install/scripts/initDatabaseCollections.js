"use strict";const app=require("../../server"),migrations=[];let connected=!1;function run(e){if(migrations.length){migrations.shift()(function(o){if(o)return e(o);run(e)})}else console.log("Init complete."),e()}app.models().forEach(function(e){const o=e.dataSource;o&&e.modelName.match(/^[a-z]/)&&migrations.push(function(n){connected?(console.log(`(Re)Creating ${e.modelName}...`),o.automigrate(e.modelName,n)):o.connect(function(){connected=!0,console.log(`(Re)Creating ${e.modelName}...`),o.automigrate(e.modelName,n)})})}),module.exports=run;