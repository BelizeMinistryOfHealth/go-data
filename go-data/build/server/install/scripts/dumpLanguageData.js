"use strict";const app=require("../../server"),fs=require("fs"),languageToken=app.models.languageToken,_=require("lodash"),languageId="english_us",languageJSON=require(`./../../config/languages/${languageId}`);function run(e){languageToken.find({where:{languageId:languageId}}).then(e=>{const a={};(e||[]).forEach(e=>{a[e.token]=e}),Object.keys(languageJSON.sections||[]).forEach(e=>{Object.keys(languageJSON.sections[e]).forEach(n=>{a[n]&&(_.set(languageJSON,`sections[${e}][${n}].translation`,a[n].translation),_.set(languageJSON,`sections[${e}][${n}].outbreakId`,a[n].outbreakId),_.set(languageJSON,`sections[${e}][${n}].modules`,a[n].modules))})})}).then(()=>{fs.writeFile(module.resolvedPath,JSON.stringify(languageJSON,null,2),a=>{if(a)return e(a);console.log("Dumped Language Data"),e()})}).catch(e)}module.exports=(e=>(module.resolvedPath=e,run));