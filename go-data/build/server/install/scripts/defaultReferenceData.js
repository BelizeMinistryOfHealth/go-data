"use strict";const app=require("../../server"),referenceData=app.models.referenceData,defaultReferenceData=require("./defaultReferenceData.json"),common=require("./_common"),async=require("async");let options={_init:!0,_sync:!0};function run(e){let r=[];Object.keys(defaultReferenceData).forEach(function(e){Object.keys(defaultReferenceData[e]).forEach(function(a){let t=referenceData.getTranslatableIdentifierForValue(e,a);r.push(function(r){referenceData.findOne({deleted:!0,where:{id:t}}).then(function(r){if(!r)return referenceData.create(Object.assign({id:t,value:t,description:`${t}_DESCRIPTION`,categoryId:e,readOnly:defaultReferenceData[e][a].readOnly,colorCode:defaultReferenceData[e][a].colorCode,iconId:defaultReferenceData[e][a].iconId,order:defaultReferenceData[e][a].order},common.install.timestamps),options);if(void 0!==defaultReferenceData[e][a].colorCode&&defaultReferenceData[e][a].colorCode!==r.colorCode||void 0!==defaultReferenceData[e][a].order&&defaultReferenceData[e][a].order!==r.order){const t={};return void 0!==defaultReferenceData[e][a].colorCode&&(t.colorCode=defaultReferenceData[e][a].colorCode),void 0!==defaultReferenceData[e][a].order&&(t.order=defaultReferenceData[e][a].order),r.updateAttributes(t,options)}return r}).then(function(){r()}).catch(r)})})}),async.parallelLimit(r,10,function(r){if(r)return e(r);console.log("Default Reference Data Installed"),e()})}module.exports=run;