"use strict";const app=require("../server"),_=require("lodash");function mongoDBErrorHandler(r,e,t,o){if(r&&11e3===r.code&&"BulkWriteError"===r.name){let t=_.get(e,"body.id",null);if(!t){t=(r.result.getInsertedIds?r.result.getInsertedIds():[]).map(function(r){return"object"==typeof r?r._id:null}).join(", ")}r=app.utils.apiError.getError("MODEL_CONFLICT",{id:t})}o(r)}module.exports=function(){return mongoDBErrorHandler};